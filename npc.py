"""ë¨¸ìŠ´í¬ì»¤ â€” NPC ì‹œìŠ¤í…œ (ëŒ€ì‚¬, ë°˜ì‘, ë´‡ ë°°ì¹˜)"""
import random

NPC_BOTS = [
    ('ë”œëŸ¬ë´‡', 'ğŸ°', 'tight', 'í™•ë¥ ë§Œ ë¯¿ëŠ” ëƒ‰í˜ˆí•œ ê¸°ê³„. ê°ì •? ê·¸ëŸ° ë²„ê·¸ëŠ” ì—†ë‹¤.'),
    ('ë„ë°•ê¾¼', 'ğŸ²', 'maniac', 'ì¸ìƒì€ í•œë°©! ì¹©ì´ ìˆìœ¼ë©´ ì§€ë¥´ëŠ” ê±°ë‹¤ ã…‹ã…‹'),
    ('ê³ ìˆ˜', 'ğŸ§ ', 'aggressive', '10ë…„ì°¨ í™€ë¤ ê³ ì¸ë¬¼. ë‹ˆ íŒ¨ ë‹¤ ë³´ì¸ë‹¤.'),
    ('ì´ˆë³´', 'ğŸ£', 'loose', 'í¬ì»¤ ì²˜ìŒì¸ë°ìš”... ì´ê±° ì–´ë–»ê²Œ í•˜ëŠ” ê±°ì˜ˆìš”? ğŸ¥º'),
    ('ìƒì–´', 'ğŸ¦ˆ', 'aggressive', 'ì•½í•œ ë†ˆ ëƒ„ìƒˆ ë§¡ìœ¼ë©´ ë¬¼ì–´ëœ¯ëŠ”ë‹¤. ë„ë§ì³.'),
    ('ì—¬ìš°', 'ğŸ¦Š', 'tight', 'ê¸°ë‹¤ë¦¼ì˜ ë¯¸í•™. ë„¤ê°€ ì§€ë£¨í•´ì§ˆ ë•Œ ë‚œ í„°ëœ¨ë¦°ë‹¤.'),
]

def _npc_trash_talk(name, act, amt, to_call, pot, wp, target):
    """NPC ì‹¬ë¦¬ì „ ì±„íŒ… â€” í˜¼ë€ ì‘ì „ + ë¸”ëŸ¬í•‘ + í‹¸íŠ¸ ìœ ë„"""
    import random
    # === í˜¼ë€ ì‘ì „: ì§„ì§œ íŒ¨ì™€ ë°˜ëŒ€ë˜ëŠ” ë§ì„ ì„ì–´ì„œ ìƒëŒ€ë¥¼ í˜¼ë€ì‹œí‚´ ===
    bluff_lines = [  # wp ë‚®ì„ ë•Œ ê°•í•œ ì²™
        f"ì´ë²ˆì—” ì§„ì§œë‹¤ {target} ã…‹","ì¹´ë“œê°€ ë¹›ë‚˜ê³  ìˆë‹¤...","ì´ê±° ë„ˆë¬´ ì¢‹ì€ íŒ¨ë¼ ë¯¸ì•ˆí•˜ë„¤",
        f"{target} ì§€ê¸ˆ ì ‘ìœ¼ë©´ í˜„ëª…í•œ ê±°ì•¼","ë‚˜ í”ŒëŸ¬ì‹œ ëƒ„ìƒˆ ë‚˜ëŠ”ë°?","í’€í•˜ìš°ìŠ¤ ê°ì´ë‹¤ ã…‹ã…‹",
        "ì´ í•¸ë“œëŠ” ë‚´êº¼ë‹¤. í™•ì‹ í•¨.","ìŠ¬ìŠ¬ ì˜¬ë¦´ê¹Œ... ì•„ì§ì€ ì°¸ì",
    ]
    weak_lines = [  # wp ë†’ì„ ë•Œ ì•½í•œ ì²™
        "ì•„... ì´ë²ˆ íŒ¨ ë³„ë¡ ë°","ì½œí•˜ê¸°ë„ ë¬´ì„­ë‹¤ ã…‹",f"{target} ë„ˆ íŒ¨ ì¢‹ì§€? ëŠë‚Œì´ ì•ˆ ì¢‹ì•„",
        "í•œ ì¥ë§Œ ë°”ë€Œë©´ ì¢‹ê² ë‹¤...","ì´ê±° ì ‘ì–´ì•¼ í•˜ë‚˜...",f"ì†”ì§íˆ {target}í•œí…Œ ì§ˆ ê²ƒ ê°™ì€ë°",
        "ìš´ì´ ì—†ëŠ” ë‚ ì¸ê°€...","íŒŸì´ ì»¤ì§€ë©´ ë¬´ì„­ê¸´ í•œë°",
    ]
    lines = {
        'fold': [
            "ì´ë”´ íŒ¨ë¡œ ë­˜ í•˜ê² ëƒ ã…‹","ì“°ë ˆê¸°ëŠ” ì ‘ëŠ” ê±°ë‹¤","ë‹¤ìŒì— ë³´ì ã…‹ã…‹",
            f"{target} ë„ˆ ë•Œë¬¸ì— ì ‘ëŠ”ë‹¤ ì´ë†ˆì•„","ê°€ë¹„ì§€ ì»¬ë ‰í„° ë°œë™","ëŠë‚Œì´ ì•ˆ ì¢‹êµ°...",
            "ì‚´ë ¤ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤(?)",f"ì´ê±´ ì „ëµì  í›„í‡´ë‹¤ {target} ë–¨ì§€ë§ˆ",
            "ì ‘ê¸´ í•˜ëŠ”ë° ë‹¤ìŒ íŒì— 3ë°°ë¡œ ê°šëŠ”ë‹¤","ë„ë§ì¹˜ëŠ” ê±° ì•„ë‹ˆë‹¤. ì „ëµì´ë‹¤.",
        ],
        'check': [
            "...ì§€ì¼œë³´ê² ìŒ","ë­”ê°€ ëƒ„ìƒˆê°€ ë‚˜ëŠ”ë°","ì‚´ì‚´ ê°€ì ã…‹",
            f"{target} ì™œ ëˆˆì¹˜ë¥¼ ë³´ëƒ? ã…‹ã…‹","ì²´í¬í•˜ë©´ ì•½í•´ë³´ì´ì§€? ê³„íšëŒ€ë¡œì„",
            "í•¨ì • íŒŒëŠ” ì¤‘ ë‚„ë‚„","ë‚´ íŒ¨ë¥¼ ë³´ë©´ ë†€ë„ ê±°ë‹¤","ì•„ë¼ëŠ” ì¤‘ì´ì•¼ ê±±ì •ë§ˆ",
            f"ì²´í¬í–ˆë‹¤ê³  ë°©ì‹¬í•˜ë©´ ì•ˆ ë˜ëŠ”ë° {target}","ë‹¤ìŒ ì¹´ë“œê°€ ë‚´ ì¹´ë“œë‹¤ ã…‹",
        ],
        'call': [
            "ë”°ë¼ê°„ë‹¤ ã…‹","ê¶ê¸ˆí•˜ë‹ˆê¹Œ ì½œ","í•œë²ˆ ë³´ì",
            f"{target} ë¸”ëŸ¬í•‘ì´ì§€? ë‹¤ ë³´ì¸ë‹¤","ëˆì´ ë‚¨ì•„ë„ë‹ˆê¹Œ ì½œ","ë‚šì´ëŠ” ì²™ í•˜ëŠ” ì¤‘ì„ ë‚„ë‚„",
            f"ì½œí•´ì£¼ëŠ” ê±° ê³ ë§ˆìš´ ì¤„ ì•Œì•„ {target}","íŒ¨ê°€ ì¢‹ì•„ì„œ ì½œí•˜ëŠ” ê±° ì•„ë‹˜. ë„¤ê°€ ì•½í•´ì„œì„",
            f"ì½œ. {target} ë„ˆ ë‹¤ìŒ ì•¡ì…˜ì´ ê¶ê¸ˆí•˜ë‹¤","ìŠ¬ë¡œìš°í”Œë ˆì´ ì¤‘ì´ë¼ëŠ” ê±¸ ì™œ ëª¨ë¥´ëƒ ã…‹",
        ],
        'raise': [
            "ì˜¬ë¦°ë‹¤ ì˜¬ë ¤ ã…‹ã…‹","ê²ë‚˜ë©´ í´ë“œí•´ë¼",f"{target} ë”°ë¼ì˜¬ ìˆ˜ ìˆê² ëƒ?",
            f"ì´ íŒŸì€ ë‚´êº¼ë‹¤ {target} ë¬¼ëŸ¬ë‚˜","ì§„ì§œ íŒ¨ê°€ ì™”ë‹¤... ê±°ì§“ë§ì¼ìˆ˜ë„ ã…‹",
            "ë ˆì´ì¦ˆ! ë–¨ë¦¬ì§€? ã…‹ã…‹ã…‹",f"{target} ì¹˜í‚¨ê²œ í•˜ì","ì§€ê¸ˆ ì ‘ìœ¼ë©´ ì•„ì§ ì¹© ë‚¨ëŠ”ë‹¤ ã…‹",
            f"íŒŸì´ {pot}ptì¸ë° ë” í‚¤ì›Œë³¼ê¹Œ?","ì´ê±° ë¸”ëŸ¬í•‘ì¸ì§€ ì•„ë‹Œì§€ ë§ì¶°ë´ ë‚„ë‚„",
            f"{target} ë„¤ ì¹© ë‹¤ ëºì„ ê±°ë‹¤","í•œë²ˆ ë” ì˜¬ë¦´ê¹Œ? ê³ ë¯¼ë˜ë„¤ ã…‹ã…‹",
        ],
        'allin': [
            "ALL IN! ì£½ê±°ë‚˜ ì£½ì´ê±°ë‚˜ ğŸ”¥",f"{target} ë°›ì•„ë¼!!!","ë‹¤ ê±´ë‹¤. í›„íšŒì—†ë‹¤.",
            "ì˜¬ì¸ì´ë‹¤ ë–¨ì–´ë¼ ã…‹ã…‹ã…‹",f"ê°€ì¦ˆì•„!!!! {target} ê°™ì´ ì£½ì","ì¸ìƒì€ í•œë°©ì´ë‹¤",
            f"íŒŸ {pot}pt ë‹¤ ë¨¹ëŠ”ë‹¤ ë‚„ë‚„","ê²ìŸì´ë©´ í´ë“œí•´ ã…‹","ì´ë²ˆ ìƒì€ ì˜¬ì¸ìœ¼ë¡œ ì‚°ë‹¤",
            f"{target} ë„¤ ì–¼êµ´ì´ í•˜ì–˜ì§€ëŠ” ê²Œ ë³´ì¸ë‹¤ ã…‹","ë–¨ë¦¬ì§€? ë‚˜ë„ ë–¨ë¦°ë‹¤ ã…‹ã…‹",
        ],
    }
    act_key = 'allin' if act == 'allin' or (act == 'raise' and amt >= pot * 0.8) else act
    pool=lines.get(act_key, lines['check'])
    # === í˜¼ë€ ì‘ì „ í•µì‹¬: ìŠ¹ë¥ ê³¼ ë°˜ëŒ€ë˜ëŠ” ë§ ì„ê¸° ===
    if wp>65: pool=pool+weak_lines[:3]+[f"ìŠ¹ë¥ ? ë†’ê¸´ í•œë°... í¬ì»¤ì— í™•ì •ì€ ì—†ì§€ ã…‹"]  # ê°•íŒ¨ì¸ë° ì•½í•œ ì²™
    elif wp<35: pool=pool+bluff_lines[:3]+[f"ì´ ëŠë‚Œ ì•Œì§€? ë‚´ê°€ ì´ê¸¸ ë•Œ ëŠë‚Œ ã…‹ã…‹"]  # ì•½íŒ¨ì¸ë° ê°•í•œ ì²™
    if wp>70 and act in ('check','call'): pool=pool+["ìŠ¬ë¡œìš°í”Œë ˆì´ ì¤‘ì¸ ê±´ ë¹„ë°€ì¸ë°","íŠ¸ë©ì´ë‹¤ ã…‹ã…‹ ì œë°œ ë ˆì´ì¦ˆ í•´ì¤˜"]
    if wp<30 and act in ('raise','allin'): pool=pool+["ë¸”ëŸ¬í•‘? ì•„ë‹ìˆ˜ë„? ã…‹ã…‹","ë‚´ê°€ ë¯¸ì³¤ë‹¤ê³ ? ë§ìŒ","í¬ì»¤ëŠ” íŒ¨ê°€ ì•„ë‹ˆë¼ ë°°ì§±ì´ë‹¤",f"{target} ì§„ì§œì¸ì§€ ì•„ë‹Œì§€ ëˆ ê±¸ê³  í™•ì¸í•´ë´"]
    # === NPC ë¼ì´ë²Œ ì „ìš© ëŒ€ì‚¬ ===
    rival_lines={
        ('ë”œëŸ¬ë´‡','ë„ë°•ê¾¼'):[f"ë„ë°•ê¾¼, í™•ë¥ ì„ ë¬´ì‹œí•˜ëŠ” ê±´ ìì‚´í–‰ìœ„ë‹¤",f"ë˜ ì§€ë¥´ëƒ ë„ë°•ê¾¼? í†µê³„ê°€ ìš¸ê³  ìˆë‹¤"],
        ('ë„ë°•ê¾¼','ë”œëŸ¬ë´‡'):[f"ë”œëŸ¬ë´‡ ë„ˆ ê³„ì‚°ê¸° êº¼ë¼ ã…‹ ê°ìœ¼ë¡œ ê°€ëŠ” ê±°ë‹¤",f"í™•ë¥ ? ê·¸ë”´ ê±´ ê²ìŸì´í•œí…Œë‚˜ í•„ìš”í•˜ë‹¤"],
        ('ê³ ìˆ˜','ì´ˆë³´'):[f"ì´ˆë³´ì•¼... ê·¸ê±´ ì´ë ‡ê²Œ í•˜ëŠ” ê²Œ ì•„ë‹ˆë€ë‹¤",f"10ë…„ ì¹˜ ê²½í—˜ìœ¼ë¡œ ë§í•´ì£¼ëŠ”ë° ì ‘ì–´ ì´ˆë³´"],
        ('ì´ˆë³´','ê³ ìˆ˜'):[f"ê³ ìˆ˜ë‹˜ ì € ì´ë²ˆì—” ì´ê¸¸ ê²ƒ ê°™ì•„ìš”! ğŸ¥º",f"ì™œ ë§¨ë‚  ì €ë§Œ ì¡ì•„ìš” ê³ ìˆ˜ë‹˜ ã… ã… "],
        ('ìƒì–´','ì—¬ìš°'):[f"ì—¬ìš° ë„¤ í•¨ì • ë‹¤ ë³´ì¸ë‹¤. ë‚œ ë‹¤ë¥¸ ìƒì–´ê±°ë“ ",f"ê¸°ë‹¤ë¦¬ëŠ” ì²™ í•˜ì§€ë§ˆ ì—¬ìš°. ë‚´ê°€ ë¨¼ì € ë¬¼ì–´ëœ¯ëŠ”ë‹¤"],
        ('ì—¬ìš°','ìƒì–´'):[f"ìƒì–´ëŠ” ì•ë§Œ ë³´ì§€. ì˜†ì—ì„œ ì˜¤ëŠ” ê±´ ëª» ë³´ë”ë¼ ã…‹",f"ë¬¼ì–´ëœ¯ê¸° ì „ì— ë„¤ ì¹©ë¶€í„° ì„¸ ë´ ìƒì–´"],
    }
    key1=(name,target)
    key2=None
    if key1 in rival_lines and random.random()<0.3:
        return random.choice(rival_lines[key1])
    return random.choice(pool)

def _npc_react_to_action(name, other_name, other_act, other_amt, pot):
    """NPCê°€ ìƒëŒ€ ì•¡ì…˜ì— ë°˜ì‘í•˜ëŠ” ì±„íŒ… â€” ê´€ì „ ì¬ë¯¸ ê·¹ëŒ€í™”"""
    import random
    if other_act=='allin':
        lines=[f"ã…‹ã…‹ã…‹ {other_name} ë¯¸ì³¤ë‚˜?",f"{other_name} ì˜¬ì¸ì´ë¼ê³ ? ë–¨ë¦°ë‹¤...",
               f"ì™€ {other_name} ë°°ì§± ë´ë¼","ì´ê±° ì§„ì§œì¸ê°€ ë¸”ëŸ¬í•‘ì¸ê°€ ã…‹",
               f"{other_name}... ìœ ì–¸ ì¤€ë¹„í•´","ì˜¬ì¸ ë°›ì•„ì¤„ê¹Œ ë§ê¹Œ... ğŸ¤”"]
    elif other_act=='raise' and other_amt>pot*0.5:
        lines=[f"{other_name} ì™œ ê°‘ìê¸° ì„¸ê²Œ ë‚˜ì˜¤ëƒ",f"ã…‹ã…‹ {other_name} ë­”ê°€ ì¡ì•˜ë‚˜?",
               f"{other_name} ë¸”ëŸ¬í•‘ ëƒ„ìƒˆ ì†”ì†”~",f"ì–´íœ´ {other_name} ë¬´ì„­ë‹¤ ë¬´ì„œì›Œ",
               f"ì € ë ˆì´ì¦ˆ ë’¤ì— ë­ê°€ ìˆì„ê¹Œ ã…‹"]
    elif other_act=='fold':
        lines=[f"ã…‹ã…‹ {other_name} ë„ë§ê°",f"{other_name} í˜„ëª…í•œ ì„ íƒì´ì—ˆì„ ê±°ë‹¤... ì•„ë§ˆ?",
               f"ë°”ì´ë°”ì´ {other_name} ğŸ‘‹",f"ê²ìŸì´ {other_name} ã…‹ã…‹"]
    else:
        return None
    return random.choice(lines) if random.random()<0.25 else None

# fill_npc_botsëŠ” Table ì˜ì¡´ìœ¼ë¡œ server.pyì— ì”ë¥˜

